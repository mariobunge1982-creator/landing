(()=>{"use strict";var e=["val","p1","p2","p3","p4","p5","p6","p7","p8","p9","p10","cur","cust","page","itms","ref","tn","cuid","iframe_url"],i=function(){function i(i,t,n){void 0===n&&(n={});var o,r,l,a,d=this;this.version="1.0.0",this.pixelParams={},this._fire=function(){d._addParamsToPixel(),d._generatePixelElement(),d._attachPixel()},this._documentReady=function(e){var i;"loading"!=document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):null===(i=null===document||void 0===document?void 0:document.attachEvent)||void 0===i||i.call(document,"onreadystatechange",(function(){"complete"==document.readyState&&e()}))},this._addParamsToPixel=function(){Object.entries(d.pixelParams).forEach((function(e){var i=e[0],t=e[1];return d.pixelUrl.searchParams.append(i,String(t))}))},this._generatePixelElement=function(){var e,i=null!==(e=document.querySelector('iframe[title="Adelphic Universal Pixel"]'))&&void 0!==e?e:document.createElement("iframe"),t={height:"0",width:"0",style:"display:none;visibility: hidden;",src:d.pixelUrl.toString(),title:"Adelphic Universal Pixel"};Object.entries(t).forEach((function(e){var t=e[0],n=e[1];return i.setAttribute(t,n)})),d.pixel=i},this._attachPixel=function(){document.querySelector('iframe[title="Adelphic Universal Pixel"]')||setTimeout((function(){var e;d.pixel&&(null===(e=document.querySelector("body"))||void 0===e||e.appendChild(d.pixel))}))},this.pixelUrl=new URL(t),this.pixelParams.upid=i,this.pixelParams.cache_buster=Math.floor(Date.now()/1e3),this.pixelParams.url=this.pixelParams.hasOwnProperty("iframe_url")?this.pixelParams.iframe_url?null===document||void 0===document?void 0:document.location.href:null===(o=window.top)||void 0===o?void 0:o.location.href:null===(r=window.top)||void 0===r?void 0:r.location.href;var c=this.pixelParams.hasOwnProperty("iframe_url")?this.pixelParams.iframe_url?null===document||void 0===document?void 0:document.location.href:null===(l=window.top)||void 0===l?void 0:l.location.href:null===(a=window.top)||void 0===a?void 0:a.location.href;c&&(this.isDoubleEncoded(c)?(this.pixelParams.url=decodeURIComponent(c),this.pixelParams.url=decodeURIComponent(this.pixelParams.url)):this.isSingleEncoded(c)?this.pixelParams.url=decodeURIComponent(c):this.pixelParams.url=c);for(var s=0,u=Object.entries(n);s<u.length;s++){var p=u[s],m=p[0],h=p[1];e.includes(m)&&(this.pixelParams[m]=h)}void 0===i&&console.error("upid is required. upid is currently ".concat(i))}return i.prototype.fire=function(){this._documentReady(this._fire)},i.prototype.isSingleEncoded=function(e){return(e=e||"")!==decodeURIComponent(e)},i.prototype.isDoubleEncoded=function(e){if(this.isSingleEncoded(e)){var i=decodeURIComponent(e);return this.isSingleEncoded(i)}return!1},i}();window.AdelphicUniversalPixel=i})();